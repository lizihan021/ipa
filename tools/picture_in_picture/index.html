<!doctype html>
<html lang="en">
<html>
<head>
    <title>Picture in Picture Tool</title>
    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.js"></script>

    <!-- Latest compiled JavaScript {{ url_for('video_feed') }}-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            var clicktime = 0;
            var start = new Date().getTime();
            var totalTime = 0;
            var toBigtime;


            $("#waper").click(function () {
                if (clicktime % 2 == 0) {
                    $("#passive").animate({
                        left: "0%",
                        width: "100%",
                        height: "75%"
                    }, 500, function(){
                        $("#yt").animate({
                            height: "550px"
                        }, 300);
                        $("#to_input").slideDown(200);
                    });
                    
                    toBigtime = new Date().getTime();
                }
                else {
                    $("#to_input").slideUp(200);
                    $("#yt").animate({
                        height: "190px"
                    }, 300, function (){
                        $("#passive").animate({
                            left: "75%",
                            height: "25%",
                            width: "20%"
                        }, 500);
                        
                    });
                    
                    var tmp = new Date().getTime();
                    totalTime += tmp - toBigtime;
                    $("#showText2").html("<p>Time on video: " + Math.ceil(totalTime / 1000)+ " s</p>");
                }
                clicktime++;
            });

            $("#interesting").click(function () {
                //var localTime = new Date();
                var end = new Date().getTime();

                $("#showText").html("<p>Time since page loaded: " + Math.ceil((end - start) / 1000) + " s</p>");
            });
        });
    </script>

    <style>
        #passive {
            width: 20%;
            height: 25%;
            float: right;
            position: fixed;
            left: 75%;
            z-index:4;
        }
        #to_input {
            margin-top: -15px;
            width: 100%;
            height: 200px;
            background-color: black;
            display: none;
        }
        #title {
            margin-top: 25px;
        }
        .title-pad {
            margin-top: 5px;
        }
        iframe {
            pointer-events: none;
        } 
    </style>

</head>
<body>

<div class="row text-center" style="background-color: #87ceeb; padding-bottom: 20px;">
        <h1> IPA Task </h1>
        <h4> In this task you need to </h4>
</div>
<div class="container">
    

    <div class="row">
        <div style="position:absolute;z-index:3; left: 5%;" class="text-left">
            <img style="width:70%" src="mturk_active_task.PNG">
        </div>
        <div id="passive" >
            <div id="waper">
                <iframe id="yt"
                    width="100%"
                    height="190px"
                    src="https://www.youtube.com/embed/eWfkZlMIxb4?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;disablekb=1&amp;modestbranding=1"
                    frameborder="0">
                </iframe>
            </div>
            <div id="to_input">
                <div class="col-sm-3"></div>
                <div class="col-sm-2">
                    <button id="interesting" class="btn btn-primary" style="margin-top: 24px;">When the event happens</button>
                    <div id="showText" style="margin-top: 24px; color: white;"><p>Time since page loaded: 0 s</p></div>
                    <div id="showText2" style="margin-top: -10px; color: white;"><p>Time on video: 0 s</p></div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group text-center">
                      <input type="text" class="form-control" id="title" placeholder="title">
                      <input type="text" class="form-control title-pad" id="title2" placeholder="title">
                      <input type="text" class="form-control title-pad" id="title3" placeholder="title">
                      <button class="btn btn-primary title-pad"> submit </button>
                      <button class="btn btn-primary title-pad" id="interesting" style="display: inline;"> Event! </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

</body>
</html>